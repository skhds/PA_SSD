####################################################################
# Copyright CoWare, Inc. 1996-2004. All rights reserved.           #
#                                                                  #
# Author : CoWare                                                  #
#                                                                  #
# Filename : Makefile                                              #
#                                                                  #
# Purpose : makefile for software build : Use in your SOFTWARE_xxx #
#           export directory & override CORE specific defines      #
#                                                                  #
####################################################################
#-----Makefile.example-------------------------------------
#-----Include definitions dumped by platformcreator -------
include Makefile.include
CPPFILES += addr_trans.c background_gc.c bare_utils.c bg_gc_dist_ftl.c dftl_meta.c dftl_trans.c dist_ftl_meta.c dist_ftl_trans.c dist_ftl_utils.c dy_wl_dist_ftl.c dynamic_wl.c dynamic_wl_dftl.c fg_gc_dist_ftl.c foreground_gc.c foreground_gc_dftl.c ftl.c ftl_global_var.c ftl_meta.c ftl_stat.c ftl_utils.c generic_list.c hw_if.c hw_main.c nand_cmd_layer.c sim_if.c struct_meta.c cache_buffer.c device_if.c
EXTRA_SIM_DEPENDS += ./boot.o
ASMFILES += 
CODEBASE = 0x0
DATABASE = 0x080000
BOOT_DIR = .
CORE_INCLUDES = 
DISASSEMBLY_FILE = sim.dis
LINKER_OPTIONS = 
CORE_LIBRARIES = boot.o --ro-base ${CODEBASE} --rw-base ${DATABASE} --first 'boot.o(_CWR_BOOT_CODE)' 
CORE_DEFINES = 
#-----Set up compiler and options--------------------------
ASM = armasm
CXX = armcc
LD = armlink
ASMFLAGS = 
CXXFLAGS = -g -O2 
LDFLAGS = --map --first=boot.o\(_CWR_BOOT_CODE\)
SYMFILE = ./symfile
#-----Include standard buildrules--------------------------
include /opt/synopsys/K-2015.06-SP1/SLS/linux/pc/swlib/Makefile.buildrules
symfile: 
	$(LD) -symbols -map -list mapfile $(LIBRARIES) -o simmap $(notdir $(OBJ))
	gawk -f /opt/synopsys/K-2015.06-SP1/IP/ARM926EJS_TLM2_PSP/Softflow/script/ADS_CreateSymfile.awk -v cpu="HARDWARE.i_ARM926EJS_TLM2_Model" mapfile > $(SYMFILE)
#-----Generated by make depend---------------------------
disassembly: 
	fromelf -c sim > $(DISASSEMBLY_FILE)
clean:
	rm -f *.o
bin:
	fromelf --bin -o sim.bin sim

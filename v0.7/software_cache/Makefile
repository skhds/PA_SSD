####################################################################
# Copyright CoWare, Inc. 1996-2004. All rights reserved.           #
#                                                                  #
# Author : CoWare                                                  #
#                                                                  #
# Filename : Makefile                                              #
#                                                                  #
# Purpose : makefile for software build : Use in your SOFTWARE_xxx #
#           export directory & override CORE specific defines      #
#                                                                  #
####################################################################
#-----Makefile.example-------------------------------------
#-----Include definitions dumped by platformcreator -------
include Makefile.include
CPPFILES += bare_utils.c hw_main.c cache_buffer.c request_manage.c
EXTRA_SIM_DEPENDS += ./boot.o
ASMFILES += 
CODEBASE = 0x0
DATABASE = 0x80000
BOOT_DIR = .
CORE_INCLUDES = 
DISASSEMBLY_FILE = sim.dis
LINKER_OPTIONS = 
CORE_LIBRARIES = boot.o --ro-base ${CODEBASE} --rw-base ${DATABASE} --first 'boot.o(_CWR_BOOT_CODE)' 
CORE_DEFINES = 
#-----Set up compiler and options--------------------------
ASM = armasm
CXX = armcc
LD = armlink
ASMFLAGS = 
CXXFLAGS = -g -O0 
LDFLAGS = --map --first=boot.o\(_CWR_BOOT_CODE\)
SYMFILE = ./symfile
#-----Include standard buildrules--------------------------
include /opt/synopsys/K-2015.06-SP1/SLS/linux/pc/swlib/Makefile.buildrules
symfile: 
	$(LD) -symbols -map -list mapfile $(LIBRARIES) -o simmap $(notdir $(OBJ))
	gawk -f /opt/synopsys/K-2015.06-SP1/IP/ARM926EJS_TLM2_PSP/Softflow/script/ADS_CreateSymfile.awk -v cpu="HARDWARE.i_ARM926EJS_TLM2_Model" mapfile > $(SYMFILE)
#-----Generated by make depend---------------------------
disassembly: 
	fromelf -c sim > $(DISASSEMBLY_FILE)
clean:
	rm -f *.o
bin:
	fromelf --bin -o sim.bin sim
